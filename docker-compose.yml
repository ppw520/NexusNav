services:
  nexusnav-backend:
    build:
      context: .
      dockerfile: backend/Dockerfile
    container_name: nexusnav-backend
    environment:
      SPRING_DATASOURCE_URL: jdbc:sqlite:/app/data/nexusnav.db
      NEXUSNAV_CONFIG_PATH: /app/config/config.json
      NEXUSNAV_NAV_PATH: /app/config/nav.json
      NEXUSNAV_HEALTH_INTERVAL: "60"
    volumes:
      - ./data:/app/data
      - ./config:/app/config
    ports:
      - "8080:8080"

  nexusnav-frontend:
    build:
      context: .
      dockerfile: frontend/Dockerfile
    container_name: nexusnav-frontend
    depends_on:
      - nexusnav-backend
    environment:
      VITE_API_BASE: /api
    ports:
      - "80:80"
