services:
  nexusnav-backend:
    image: ghcr.io/ppw520/nexusnav-backend:${IMAGE_TAG:-latest}
    container_name: nexusnav-backend
    restart: unless-stopped
    environment:
      SPRING_DATASOURCE_URL: jdbc:sqlite:/app/data/nexusnav.db
      NEXUSNAV_CONFIG_PATH: /app/config/config.json
      NEXUSNAV_NAV_PATH: /app/config/nav.json
      NEXUSNAV_HEALTH_INTERVAL: "60"
    volumes:
      - ./data:/app/data
      - ./config:/app/config

  nexusnav-frontend:
    image: ghcr.io/ppw520/nexusnav-frontend:${IMAGE_TAG:-latest}
    container_name: nexusnav-frontend
    restart: unless-stopped
    depends_on:
      - nexusnav-backend
    ports:
      - "80:80"
